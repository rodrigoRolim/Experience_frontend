<template>
  <div class="doctor-patient">
   <!--  <transition
      name="dropside"
      enter-active-class="sidebar--show"
      leave-active-class="sidebar--hidden"
    > -->
      <div class="doctor-patient__sidebar"
        id="scrollbar" 
        :class="{ 'sidebar--show': displaySideBar, 'sidebar--hidden': !displaySideBar }"
      >
        <the-sidebar :patient="patient" />
      </div>
   <!--  </transition> -->
    <div class="doctor-patient__main" >
      <div class="doctor-patient__patient">
        <patient-exams-list-header
         :patient="patient"
         :health-center="healthCenter"
         :attendance="attendance"
         :name="name"
         :age="age"
         :gender="gender"
         :delivery="delivery"
         :doctor="doctor"
        ></patient-exams-list-header>
      </div>
      <div class="doctor-patient__exams">
        <patient-exam-list 
          :health-center="healthCenter"
          :attendance="attendance"
          :patient="patient"
        />
      </div>
    </div>
  </div>
</template>

<script>
import PatientExamsListHeader from '../components/PatientExamListHeader'
import PatientExamList from '../components/PatientExamList'
import TheSidebar from '../components/TheSidebar'
import { NAMESPACED_PROPS } from '../utils/alias'
import { mapGetters } from 'vuex'
import { bus } from '../main'
export default {
  name: 'DoctorPatientExams',
  components: {
    /* PatientExams */
    PatientExamsListHeader,
    TheSidebar,
    PatientExamList
  },
  data () {
    return {
      displaySideBar: false
    }
  },
  created () {
    bus.$on('sidebar', (data) => {
      this.displaySideBar = data
    })
  },
  computed: {
    ...mapGetters(NAMESPACED_PROPS, [
      'patient',
      'healthCenter',
      'attendance',
      'name',
      'age',
      'gender',
      'delivery',
      'doctor'
    ]),
  }
}
</script>

<style lang="sass" scoped>
@import '../styles/animations/__dropside'
@import '../styles/_scrollbar'
@include scrollbar($el: '#scrollbar', $w: 15px)

.doctor-patient
  display: flex
  @include respond-to(handhelds)
    margin-top: 60px
    margin-bottom: 40px
  min-height: 100vh
.doctor-patient__main
  width: calc( 100% - 360px )
  display: flex
  flex-direction: column
  align-items: flex-end
  width: 100%
  @include respond-to(medium-screens)
    margin-left: 0
    width: 100%
  @include respond-to(handhelds)
    margin-top: 0
    margin-left: 0
    width: 100%
.doctor-patient__exams
  width:  calc( 100% - 321px )
  margin-top: 150px
  @include respond-to(medium-screens)
    width: 100%
    margin-top: 120px
  @include respond-to(handhelds)
    width: 100%
    margin-top: 50px
.doctor-patient__sidebar,
.doctor-patient__patient
  position: fixed
  top: 60px
.doctor-patient__sidebar
  @include respond-to(wide-screens)
    display: block
  position: fixed
  width: 321px
  overflow-y: auto
  height: 100vh
  z-index: 4
  @include respond-to(medium-screens)
    overflow-x: hidden
.doctor-patient__patient
  width: calc( 100% - 321px )
  z-index: 2
  @include respond-to(medium-screens)
    width: 100%
  @include respond-to(handhelds)
    width: 100%
</style>